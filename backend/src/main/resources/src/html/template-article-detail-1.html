<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>文章列表 - 浮闲阁</title>
        <link href="../../public/css/article-list.css" rel="stylesheet" type="text/css"/>
        <link href="../../public/css/theme.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <!-- 页面头部 -->
        <header>
            <button id="open-button" class="menu-button">Open Menu</button>
        </header>

        <!-- 功能菜单导航 -->
        <nav class="off-canvas">
            <nav class="menu">
                <menu class="icon-list">
                    <a href="#"><i class="fa fa-fw fa-star-o"></i><span>Favorites</span></a>
                    <a href="#"><i class="fa fa-fw fa-bell-o"></i><span>Alerts</span></a>
                    <a href="#"><i class="fa fa-fw fa-envelope-o"></i><span>Messages</span></a>
                    <a href="#"><i class="fa fa-fw fa-comment-o"></i><span>Comments</span></a>
                    <a href="#"><i class="fa fa-fw fa-bar-chart-o"></i><span>Analytics</span></a>
                    <a href="#"><i class="fa fa-fw fa-newspaper-o"></i><span>Reading List</span></a>
                </menu>
            </nav>
            <button class="close-button" id="close-button">Close Menu</button>

            <!-- 动画路径 -->
            <div id="morph-shape" class="morph-shape" data-morph-open="M-7.312,0H15c0,0,66,113.339,66,399.5C81,664.006,15,800,15,800H-7.312V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z">
                <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 800" preserveAspectRatio="none">
                    <path d="M-7.312,0H0c0,0,0,113.839,0,400c0,264.506,0,400,0,400h-7.312V0z"/>
                </svg>
            </div>
        </nav>

        <!-- 内容主题 -->
        <main class="container">

            <div class="container-wrap">
                <section class="col-640">我是内容1</section>
                <section class="col-290">我是内容2</section>
            </div>
        </main>

        <!-- 底部菜单 -->
        <footer></footer>

        <!-- 侧边固定菜单 -->
        <aside></aside>
    </body>

    <script src="../../public/lib/svg/snap.svg-min.js"></script>
    <script src="../../public/lib/classie.js"></script>
    <script>
        (function() {

            var bodyEl = document.body,
                content = document.querySelector( '.container' ),
                openBtn = document.getElementById( 'open-button' ),
                closeBtn = document.getElementById( 'close-button' ),
                isOpen = false,

                morphEl = document.getElementById( 'morph-shape' ),
                s = Snap( morphEl.querySelector( 'svg' ) );
                path = s.select( 'path' );
                initialPath = this.path.attr('d');
                steps = morphEl.getAttribute( 'data-morph-open' ).split(';');
                stepsTotal = steps.length;
                isAnimating = false;

            function init() {
                initEvents();
            }

            function initEvents() {
                openBtn.addEventListener( 'click', toggleMenu );
                if( closeBtn ) {
                    closeBtn.addEventListener( 'click', toggleMenu );
                }

                // close the menu element if the target itÂ´s not the menu element or one of its descendants..
                content.addEventListener( 'click', function(ev) {
                    var target = ev.target;
                    if( isOpen && target !== openBtn ) {
                        toggleMenu();
                    }
                } );
            }

            function toggleMenu() {
                if( isAnimating ) return false;
                isAnimating = true;
                if( isOpen ) {
                    classie.remove( bodyEl, 'show-off-canvas' );
                    // animate path
                    setTimeout( function() {
                        // reset path
                        path.attr( 'd', initialPath );
                        isAnimating = false;
                    }, 300 );
                }
                else {
                    classie.add( bodyEl, 'show-off-canvas' );
                    // animate path
                    var pos = 0,
                        nextStep = function( pos ) {
                            if( pos > stepsTotal - 1 ) {
                                isAnimating = false;
                                return;
                            }
                            path.animate( { 'path' : steps[pos] }, pos === 0 ? 400 : 500, pos === 0 ? mina.easein : mina.elastic, function() { nextStep(pos); } );
                            pos++;
                        };
                    nextStep(pos);
                }
                isOpen = !isOpen;
            }
            init();
        })();
    </script>
</html>
